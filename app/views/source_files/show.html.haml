%div#toolbar
  = render :partial => "show_buttons"
%div#source_file
  %ul
    %li.header
      %ul
        %li.file_name{:title => (@source_file.path_name + @source_file.name)}
          %span= @source_file.path_name + @source_file.name
        - if person = @source_file.person and locked_at = @source_file.locked_at
          - status = "Locked by #{person.name} #{time_ago_in_words(locked_at)} ago."
          - classname = "lock"
        - elsif last_update = @source_file.last_update
          - status = "Last updated #{time_ago_in_words(@source_file.last_update)} ago. Message: \"#{@source_file.message}\""
        - unless status.blank?
          %li.file_status{:title => status}
            %span{:class => classname}= status
    %li.content.code
      %pre= @source_file.code